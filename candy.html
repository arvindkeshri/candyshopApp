<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        
    </style>
</head>
<body>
    <h1> SWEETY CANDY SHOP</h1>
    <form onsubmit="savetoServer(event)"   id="form">
      <label>Candy :</label> 
      <input type="text" name="candyname" id="candyname"> <br><br>
      <label>Details:</label> 
      <input type="text" name="description" id="description"> <br><br>
      <label>Price:</label> 
      <input type="number" name="price" id="price"> <br><br>
      <label>Qty:</label> 
      <input type="number" name="quantity" id="quantity"> <br><br>
      <input type="submit" value="submit" id="submit"> 
      
    </form>
    <br>
    <ul id="userentry"></ul>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
    <script>
        function savetoServer(event){
            event.preventDefault();

        const candyname = event.target.candyname.value;
        const description = event.target.description.value;
        const price = event.target.price.value;
        let   quantity = event.target.quantity.value;
        const obj = {candyname, description, price, quantity};

            axios.post("https://crudcrud.com/api/696332566a284ee98a48051f4c665976/candy", obj)
                 .then((res)=>{ console.log(res)})
                 .catch((rej)=>{console.log(rej)})


        const parentElem = document.getElementById("userentry");
        const childElem = document.createElement("li");
        
        childElem.textContent = candyname+" "+description+" "+price+" "+quantity+" "
        
        const buy1 = document.createElement("input");
            buy1.type ="button"
            buy1.value = "Buy One"
            buy1.onclick = () =>{
                            quantity--;
                axios.put("https://crudcrud.com/api/696332566a284ee98a48051f4c665976/candy", obj)
                 .then((res)=>{ console.log(res)})
                 .catch((rej)=>{console.log(rej)})

            } 

            const buy2 = document.createElement("input");
            buy2.type ="button"
            buy2.value = "Buy Two"
            buy2.onclick = () =>{
                quantity = quantity-2;
                axios.put("https://crudcrud.com/api/696332566a284ee98a48051f4c665976/candy", obj)
                 .then((res)=>{ console.log(res)})
                 .catch((rej)=>{console.log(rej)})

            } 

            const buy3 = document.createElement("input");
            buy3.type ="button"
            buy3.value = "Buy Three"
            buy3.onclick = () =>{
                quantity = quantity-3;
                axios.put("https://crudcrud.com/api/696332566a284ee98a48051f4c665976/candy", obj)
                 .then((res)=>{ console.log(res)})
                 .catch((rej)=>{console.log(rej)})


            } 
            childElem.appendChild(buy1);
            childElem.appendChild(buy2);
            childElem.appendChild(buy3);
            parentElem.appendChild(childElem);

            document.getElementById("form").reset();

        }

        
    </script>
    
</body>
</html>